import{D as G,_ as H,a as K}from"./Aside.vue_vue_type_script_setup_true_lang-nM0C_LD3.js";import{d as O,m as I,u as j,r as V,a as i,c as R,o as $,w as t,b as e,e as A,f as v,g as Q,E as k,h as W,i as N,F as X,j as h,k as M,l as Z,p as P,n as z,q as ee,s as le,t as te,v as oe,x as ae,y as ne,z as ie,A as re,B as se,C as ue,D as de,G as me,H as pe,I as fe,J as _e,K as Y}from"./index-Bd8hcdAH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ce={class:"dialog-footer"},ge=O({__name:"DialogLink",props:{visible:{type:Boolean},visibleModifiers:{}},emits:I(["onSuccess"],["update:visible"]),setup(D,{expose:C,emit:g}){const f=j(D,"visible"),_=g,s=V(!1),c=()=>({id:"",text:"",link:"",textColor:"",bgColor:""}),l=V(c()),a=V(),r={text:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:32,message:"长度在 2 到 32 个字符",trigger:"blur"}],link:[{required:!0,message:"请输入链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}]},U=async()=>{a.value&&await a.value.validate((u,d)=>{u?!l.value.id||l.value.id===""?b():S():console.log("error submit!",d)})},b=async()=>{try{s.value=!0,await Q({id:l.value.id,text:l.value.text,link:l.value.link,textColor:l.value.textColor,bgColor:l.value.bgColor}),k.success("保存成功"),_("onSuccess"),m()}catch(u){console.log(u),k.error(u.msg??JSON.stringify(u))}finally{s.value=!1}},S=async()=>{try{s.value=!0,await W({id:l.value.id,text:l.value.text,link:l.value.link,textColor:l.value.textColor,bgColor:l.value.bgColor}),k.success("保存成功"),_("onSuccess"),m()}catch(u){console.log(u),k.error(u.msg??JSON.stringify(u))}finally{s.value=!1}},x=u=>{f.value=!0,u&&(l.value={...l.value,...u})},m=()=>{var u;f.value=!1,(u=a.value)==null||u.resetFields(),l.value=c()};return C({open:x,close:m}),(u,d)=>{const n=i("el-input"),o=i("el-form-item"),p=i("el-form"),q=i("el-button"),L=i("el-dialog");return $(),R(L,{modelValue:f.value,"onUpdate:modelValue":d[4]||(d[4]=w=>f.value=w),title:"设置链接","align-center":"",onClose:m},{footer:t(()=>[A("div",ce,[e(q,{onClick:m,loading:s.value},{default:t(()=>d[5]||(d[5]=[v("取消")])),_:1,__:[5]},8,["loading"]),e(q,{type:"primary",onClick:U,loading:s.value},{default:t(()=>d[6]||(d[6]=[v(" 保存 ")])),_:1,__:[6]},8,["loading"])])]),default:t(()=>[e(p,{model:l.value,rules:r,ref_key:"formRef",ref:a,"label-width":"8rem"},{default:t(()=>[e(o,{label:"链接文字",prop:"text"},{default:t(()=>[e(n,{modelValue:l.value.text,"onUpdate:modelValue":d[0]||(d[0]=w=>l.value.text=w)},null,8,["modelValue"])]),_:1}),e(o,{label:"链接地址",prop:"link"},{default:t(()=>[e(n,{modelValue:l.value.link,"onUpdate:modelValue":d[1]||(d[1]=w=>l.value.link=w)},null,8,["modelValue"])]),_:1}),e(o,{label:"链接文字颜色",prop:"textColor"},{default:t(()=>[e(n,{modelValue:l.value.textColor,"onUpdate:modelValue":d[2]||(d[2]=w=>l.value.textColor=w)},null,8,["modelValue"])]),_:1}),e(o,{label:"链接背景颜色",prop:"bgColor"},{default:t(()=>[e(n,{modelValue:l.value.bgColor,"onUpdate:modelValue":d[3]||(d[3]=w=>l.value.bgColor=w)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),ve={class:"flex flex-col gap-4"},be={class:"text-base font-bold flex items-center justify-between"},ye=O({__name:"LinksContent",props:{siteData:{}},emits:["onSuccess"],setup(D,{emit:C}){const g=D,f=C,_=V(),s=()=>{_.value&&_.value.open()},c=a=>{_.value&&_.value.open(a)},l=async a=>{try{await h(a),k.success("删除成功"),f("onSuccess")}catch(r){console.log(r),k.error(r.msg??JSON.stringify(r))}};return(a,r)=>{const U=i("el-button"),b=i("el-table-column"),S=i("el-popconfirm"),x=i("el-table");return $(),N(X,null,[A("div",ve,[A("h2",be,[r[2]||(r[2]=v(" 横幅链接广告 ")),e(U,{type:"primary",onClick:s},{default:t(()=>r[1]||(r[1]=[v("添加")])),_:1,__:[1]})]),e(x,{data:g.siteData.links,stripe:"",border:""},{default:t(()=>[e(b,{label:"链接文字",prop:"text"}),e(b,{label:"链接地址",prop:"link"}),e(b,{label:"文字颜色",prop:"textColor"}),e(b,{label:"背景颜色",prop:"bgColor"}),e(b,{label:"操作",width:"160"},{default:t(m=>[e(U,{type:"primary",link:"",onClick:u=>c(m.row)},{default:t(()=>r[3]||(r[3]=[v(" 编辑 ")])),_:2,__:[3]},1032,["onClick"]),e(S,{title:"确定要删除吗？",onConfirm:u=>l(m.row.id)},{reference:t(()=>[e(U,{type:"danger",onClick:m.row,link:""},{default:t(()=>r[4]||(r[4]=[v("删除")])),_:2,__:[4]},1032,["onClick"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),e(ge,{ref_key:"dialogLinkRef",ref:_,onOnSuccess:r[0]||(r[0]=m=>f("onSuccess"))},null,512)],64)}}}),ke={class:"dialog-footer"},xe=O({__name:"DialogAd",props:{visible:{type:Boolean},visibleModifiers:{}},emits:I(["onSuccess"],["update:visible"]),setup(D,{expose:C,emit:g}){const f=j(D,"visible"),_=g,s=V(!1),c=()=>({id:"",type:"link",link:"",imgUrl:"",file:[]}),l=V(c()),a=V(),r=V(),U={link:[{required:!0,message:"请输入链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择图片类型",trigger:"change"}],imgUrl:[{required:!0,message:"请输入图片链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],file:[{required:!0,message:"请选择图片",trigger:"change"}]},b=n=>{const o=["image/jpeg","image/png","image/gif"];return n.size>2097152?(k.error(" 图片文件最大不能超过2MB!"),!1):o.includes(n.type)?!0:(k.error("请上传图片文件!"),!1)},S=async n=>{const o=new FormData;o.append("file",n.file);try{s.value=!0;const p=await z(o);l.value.imgUrl=p.imgUrl,await m()}catch(p){console.log(p)}finally{s.value=!1}},x=async()=>{r.value&&await r.value.validate((n,o)=>{var p;n&&(l.value.type==="upload"?(p=a.value)==null||p.submit():m())})},m=async()=>{try{s.value=!0,await ee({id:l.value.id,imgUrl:l.value.imgUrl,link:l.value.link}),k.success("保存成功"),_("onSuccess"),d()}catch(n){console.log(n),k.error(n.msg??JSON.stringify(n))}finally{s.value=!1}},u=n=>{f.value=!0,n&&(l.value={...l.value,...n})},d=()=>{var n;f.value=!1,(n=r.value)==null||n.resetFields(),l.value=c()};return C({open:u,close:d}),(n,o)=>{const p=i("el-input"),q=i("el-form-item"),L=i("el-radio"),w=i("el-radio-group"),E=i("el-icon"),J=i("el-upload"),B=i("el-form"),F=i("el-button"),T=i("el-dialog");return $(),R(T,{modelValue:f.value,"onUpdate:modelValue":o[4]||(o[4]=y=>f.value=y),title:"添加横幅 (建议图片长宽比为8:1)","align-center":"",onClose:d},{footer:t(()=>[A("div",ke,[e(F,{onClick:d,loading:s.value},{default:t(()=>o[7]||(o[7]=[v("取消")])),_:1,__:[7]},8,["loading"]),e(F,{type:"primary",onClick:x,loading:s.value},{default:t(()=>o[8]||(o[8]=[v(" 保存 ")])),_:1,__:[8]},8,["loading"])])]),default:t(()=>[e(B,{model:l.value,rules:U,ref_key:"formRef",ref:r,"label-width":"8rem"},{default:t(()=>[e(q,{label:"链接地址",prop:"link"},{default:t(()=>[e(p,{modelValue:l.value.link,"onUpdate:modelValue":o[0]||(o[0]=y=>l.value.link=y)},null,8,["modelValue"])]),_:1}),e(q,{label:"图片类型",prop:"type"},{default:t(()=>[e(w,{modelValue:l.value.type,"onUpdate:modelValue":o[1]||(o[1]=y=>l.value.type=y)},{default:t(()=>[e(L,{value:"link"},{default:t(()=>o[5]||(o[5]=[v("第三方图片")])),_:1,__:[5]}),e(L,{value:"upload"},{default:t(()=>o[6]||(o[6]=[v("本地上传")])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1}),l.value.type==="link"?($(),R(q,{key:0,label:"图片地址",prop:"imgUrl"},{default:t(()=>[e(p,{modelValue:l.value.imgUrl,"onUpdate:modelValue":o[2]||(o[2]=y=>l.value.imgUrl=y)},null,8,["modelValue"])]),_:1})):M("",!0),l.value.type==="upload"?($(),R(q,{key:1,label:"图片上传",prop:"file"},{default:t(()=>[e(J,{ref_key:"uploadRef",ref:a,"file-list":l.value.file,"onUpdate:fileList":o[3]||(o[3]=y=>l.value.file=y),action:"","list-type":"picture-card","http-request":S,limit:1,"auto-upload":!1,accept:"image/*","before-upload":b},{default:t(()=>[e(E,null,{default:t(()=>[e(Z(P))]),_:1})]),_:1},8,["file-list"])]),_:1})):M("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Ce={class:"flex flex-col gap-4"},Ve={class:"text-base font-bold flex items-center justify-between"},Ue=O({__name:"AdListContent",props:{siteData:{}},emits:["onSuccess"],setup(D,{emit:C}){const g=D,f=C,_=V(),s=()=>{_.value&&_.value.open()},c=async l=>{try{await le(l),k.success("删除成功"),f("onSuccess")}catch(a){k.error(a.msg??JSON.stringify(a))}};return(l,a)=>{const r=i("el-button"),U=i("el-image"),b=i("el-table-column"),S=i("el-popconfirm"),x=i("el-table");return $(),N(X,null,[A("div",Ce,[A("h2",Ve,[a[2]||(a[2]=v(" 横幅图片广告 ")),e(r,{type:"primary",onClick:s},{default:t(()=>a[1]||(a[1]=[v("添加")])),_:1,__:[1]})]),e(x,{data:g.siteData.adList,stripe:"",border:""},{default:t(()=>[e(b,{label:"图片",prop:"imgUrl","max-width":"1000"},{default:t(m=>[e(U,{src:m.row.imgUrl,style:{height:"60px",width:"auto"}},null,8,["src"])]),_:1}),e(b,{label:"链接地址",prop:"link"}),e(b,{label:"操作",width:"160"},{default:t(m=>[e(S,{title:"确定要删除吗？",onConfirm:u=>c(m.row.id)},{reference:t(()=>[e(r,{type:"danger",onClick:m.row,link:""},{default:t(()=>a[3]||(a[3]=[v("删除")])),_:2,__:[3]},1032,["onClick"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),e(xe,{ref_key:"dialogAdRef",ref:_,onOnSuccess:a[0]||(a[0]=m=>f("onSuccess"))},null,512)],64)}}}),we={class:"dialog-footer"},Se=O({__name:"DialogTableLink",props:{visible:{type:Boolean},visibleModifiers:{}},emits:I(["onSuccess"],["update:visible"]),setup(D,{expose:C,emit:g}){const f=j(D,"visible"),_=g,s=V(!1),c=()=>({id:"",text:"",link:"",textColor:"",bgColor:""}),l=V(c()),a=V(),r={text:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:32,message:"长度在 2 到 32 个字符",trigger:"blur"}],link:[{required:!0,message:"请输入链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}]},U=async()=>{a.value&&await a.value.validate((u,d)=>{u?!l.value.id||l.value.id===""?b():S():console.log("error submit!",d)})},b=async()=>{try{s.value=!0,await te({text:l.value.text,link:l.value.link,textColor:l.value.textColor,bgColor:l.value.bgColor}),k.success("保存成功"),_("onSuccess"),m()}catch(u){console.log(u),k.error(u.msg??JSON.stringify(u))}finally{s.value=!1}},S=async()=>{try{s.value=!0,await oe({id:l.value.id,text:l.value.text,link:l.value.link,textColor:l.value.textColor,bgColor:l.value.bgColor}),k.success("保存成功"),_("onSuccess"),m()}catch(u){console.log(u),k.error(u.msg??JSON.stringify(u))}finally{s.value=!1}},x=u=>{f.value=!0,u&&(l.value={...l.value,...u})},m=()=>{var u;f.value=!1,(u=a.value)==null||u.resetFields(),l.value=c()};return C({open:x,close:m}),(u,d)=>{const n=i("el-input"),o=i("el-form-item"),p=i("el-form"),q=i("el-button"),L=i("el-dialog");return $(),R(L,{modelValue:f.value,"onUpdate:modelValue":d[4]||(d[4]=w=>f.value=w),title:"设置列表链接","align-center":"",onClose:m},{footer:t(()=>[A("div",we,[e(q,{onClick:m,loading:s.value},{default:t(()=>d[5]||(d[5]=[v("取消")])),_:1,__:[5]},8,["loading"]),e(q,{type:"primary",onClick:U,loading:s.value},{default:t(()=>d[6]||(d[6]=[v(" 保存 ")])),_:1,__:[6]},8,["loading"])])]),default:t(()=>[e(p,{model:l.value,rules:r,ref_key:"formRef",ref:a,"label-width":"8rem"},{default:t(()=>[e(o,{label:"链接文字",prop:"text"},{default:t(()=>[e(n,{modelValue:l.value.text,"onUpdate:modelValue":d[0]||(d[0]=w=>l.value.text=w)},null,8,["modelValue"])]),_:1}),e(o,{label:"链接地址",prop:"link"},{default:t(()=>[e(n,{modelValue:l.value.link,"onUpdate:modelValue":d[1]||(d[1]=w=>l.value.link=w)},null,8,["modelValue"])]),_:1}),e(o,{label:"链接文字颜色",prop:"textColor"},{default:t(()=>[e(n,{modelValue:l.value.textColor,"onUpdate:modelValue":d[2]||(d[2]=w=>l.value.textColor=w)},null,8,["modelValue"])]),_:1}),e(o,{label:"链接背景颜色",prop:"bgColor"},{default:t(()=>[e(n,{modelValue:l.value.bgColor,"onUpdate:modelValue":d[3]||(d[3]=w=>l.value.bgColor=w)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Ae={class:"flex flex-col gap-4"},De={class:"text-base font-bold flex items-center justify-between"},$e=O({__name:"AdTableContent",props:{siteData:{}},emits:["onSuccess"],setup(D,{emit:C}){const g=D,f=C,_=V(),s=()=>{_.value&&_.value.open()},c=a=>{_.value&&_.value.open(a)},l=async a=>{try{await ae(a),k.success("删除成功"),f("onSuccess")}catch(r){console.log(r),k.error(r.msg??JSON.stringify(r))}};return(a,r)=>{const U=i("el-button"),b=i("el-table-column"),S=i("el-popconfirm"),x=i("el-table");return $(),N(X,null,[A("div",Ae,[A("h2",De,[r[2]||(r[2]=v(" 列表链接广告 ")),e(U,{type:"primary",onClick:s},{default:t(()=>r[1]||(r[1]=[v("添加")])),_:1,__:[1]})]),e(x,{data:g.siteData.adTable,stripe:"",border:""},{default:t(()=>[e(b,{label:"链接文字",prop:"text"}),e(b,{label:"链接地址",prop:"link"}),e(b,{label:"文字颜色",prop:"textColor"}),e(b,{label:"背景颜色",prop:"bgColor"}),e(b,{label:"操作",width:"160"},{default:t(m=>[e(U,{type:"primary",link:"",onClick:u=>c(m.row)},{default:t(()=>r[3]||(r[3]=[v(" 编辑 ")])),_:2,__:[3]},1032,["onClick"]),e(S,{title:"确定要删除吗？",onConfirm:u=>l(m.row.id)},{reference:t(()=>[e(U,{type:"danger",onClick:m.row,link:""},{default:t(()=>r[4]||(r[4]=[v("删除")])),_:2,__:[4]},1032,["onClick"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),e(Se,{ref_key:"dialogTableLinkRef",ref:_,onOnSuccess:r[0]||(r[0]=m=>f("onSuccess"))},null,512)],64)}}}),qe={class:"dialog-footer"},Le=O({__name:"DialogAdApp",props:{visible:{type:Boolean},visibleModifiers:{}},emits:I(["onSuccess"],["update:visible"]),setup(D,{expose:C,emit:g}){const f=j(D,"visible"),_=g,s=V(!1),c=()=>({id:"",type:"link",link:"",text:"",imgUrl:"",file:[]}),l=V(c()),a=V(),r=V(),U={link:[{required:!0,message:"请输入链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],text:[{required:!0,message:"请输入文字",trigger:"blur"},{min:2,max:32,message:"长度在 2 到 32 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择图片类型",trigger:"change"}],imgUrl:[{required:!0,message:"请输入图片链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],file:[{required:!0,message:"请选择图片",trigger:"change"}]},b=n=>{const o=["image/jpeg","image/png","image/gif"];return n.size>2097152?(k.error(" 图片文件最大不能超过2MB!"),!1):o.includes(n.type)?!0:(k.error("请上传图片文件!"),!1)},S=async n=>{const o=new FormData;o.append("file",n.file);try{s.value=!0;const p=await z(o);l.value.imgUrl=p.imgUrl,await m()}catch(p){console.log(p)}finally{s.value=!1}},x=async()=>{r.value&&await r.value.validate((n,o)=>{var p;n&&(l.value.type==="upload"?(p=a.value)==null||p.submit():m())})},m=async()=>{try{s.value=!0,await ne({id:l.value.id,text:l.value.text,link:l.value.link,imgUrl:l.value.imgUrl}),k.success("保存成功"),_("onSuccess"),d()}catch(n){console.log(n),k.error(n.msg??JSON.stringify(n))}finally{s.value=!1}},u=n=>{f.value=!0,n&&(l.value={...l.value,...n})},d=()=>{var n;f.value=!1,(n=r.value)==null||n.resetFields(),l.value=c()};return C({open:u,close:d}),(n,o)=>{const p=i("el-input"),q=i("el-form-item"),L=i("el-radio"),w=i("el-radio-group"),E=i("el-icon"),J=i("el-upload"),B=i("el-form"),F=i("el-button"),T=i("el-dialog");return $(),R(T,{modelValue:f.value,"onUpdate:modelValue":o[5]||(o[5]=y=>f.value=y),title:"添加App广告 (建议图片长宽比为1:1)","align-center":"",onClose:d},{footer:t(()=>[A("div",qe,[e(F,{onClick:d,loading:s.value},{default:t(()=>o[8]||(o[8]=[v("取消")])),_:1,__:[8]},8,["loading"]),e(F,{type:"primary",onClick:x,loading:s.value},{default:t(()=>o[9]||(o[9]=[v(" 保存 ")])),_:1,__:[9]},8,["loading"])])]),default:t(()=>[e(B,{model:l.value,rules:U,ref_key:"formRef",ref:r,"label-width":"8rem"},{default:t(()=>[e(q,{label:"链接文字",prop:"text"},{default:t(()=>[e(p,{modelValue:l.value.text,"onUpdate:modelValue":o[0]||(o[0]=y=>l.value.text=y)},null,8,["modelValue"])]),_:1}),e(q,{label:"链接地址",prop:"link"},{default:t(()=>[e(p,{modelValue:l.value.link,"onUpdate:modelValue":o[1]||(o[1]=y=>l.value.link=y)},null,8,["modelValue"])]),_:1}),e(q,{label:"图片类型",prop:"type"},{default:t(()=>[e(w,{modelValue:l.value.type,"onUpdate:modelValue":o[2]||(o[2]=y=>l.value.type=y)},{default:t(()=>[e(L,{value:"link"},{default:t(()=>o[6]||(o[6]=[v("第三方图片")])),_:1,__:[6]}),e(L,{value:"upload"},{default:t(()=>o[7]||(o[7]=[v("本地上传")])),_:1,__:[7]})]),_:1},8,["modelValue"])]),_:1}),l.value.type==="link"?($(),R(q,{key:0,label:"图片地址",prop:"imgUrl"},{default:t(()=>[e(p,{modelValue:l.value.imgUrl,"onUpdate:modelValue":o[3]||(o[3]=y=>l.value.imgUrl=y)},null,8,["modelValue"])]),_:1})):M("",!0),l.value.type==="upload"?($(),R(q,{key:1,label:"图片上传",prop:"file"},{default:t(()=>[e(J,{ref_key:"uploadRef",ref:a,"file-list":l.value.file,"onUpdate:fileList":o[4]||(o[4]=y=>l.value.file=y),action:"","list-type":"picture-card","http-request":S,limit:1,"auto-upload":!1,accept:"image/*","before-upload":b},{default:t(()=>[e(E,null,{default:t(()=>[e(Z(P))]),_:1})]),_:1},8,["file-list"])]),_:1})):M("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Re={class:"flex flex-col gap-4"},Oe={class:"text-base font-bold flex items-center justify-between"},Fe=O({__name:"AdAppContent",props:{siteData:{}},emits:["onSuccess"],setup(D,{emit:C}){const g=D,f=C,_=V(),s=()=>{_.value&&_.value.open()},c=async l=>{try{await ie(l),k.success("删除成功"),f("onSuccess")}catch(a){k.error(a.msg??JSON.stringify(a))}};return(l,a)=>{const r=i("el-button"),U=i("el-image"),b=i("el-table-column"),S=i("el-popconfirm"),x=i("el-table");return $(),N(X,null,[A("div",Re,[A("h2",Oe,[a[2]||(a[2]=v(" APP图标广告 ")),e(r,{type:"primary",onClick:s},{default:t(()=>a[1]||(a[1]=[v("添加")])),_:1,__:[1]})]),e(x,{data:g.siteData.adApp,stripe:"",border:""},{default:t(()=>[e(b,{label:"图片",prop:"imgUrl","max-width":"1000"},{default:t(m=>[e(U,{src:m.row.imgUrl,style:{height:"60px",width:"auto"}},null,8,["src"])]),_:1}),e(b,{label:"链接文字",prop:"text"}),e(b,{label:"链接地址",prop:"link"}),e(b,{label:"操作",width:"160"},{default:t(m=>[e(S,{title:"确定要删除吗？",onConfirm:u=>c(m.row.id)},{reference:t(()=>[e(r,{type:"danger",onClick:m.row,link:""},{default:t(()=>a[3]||(a[3]=[v("删除")])),_:2,__:[3]},1032,["onClick"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),e(Le,{ref_key:"dialogAdAppRef",ref:_,onOnSuccess:a[0]||(a[0]=m=>f("onSuccess"))},null,512)],64)}}}),Ne={class:"dialog-footer"},Me=O({__name:"DialogAdCard",props:{visible:{type:Boolean},visibleModifiers:{}},emits:I(["onSuccess"],["update:visible"]),setup(D,{expose:C,emit:g}){const f=j(D,"visible"),_=g,s=V(!1),c=()=>({id:"",type:"link",link:"",imgUrl:"",file:[]}),l=V(c()),a=V(),r=V(),U={link:[{required:!0,message:"请输入链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择图片类型",trigger:"change"}],imgUrl:[{required:!0,message:"请输入图片链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],file:[{required:!0,message:"请选择图片",trigger:"change"}]},b=n=>{const o=["image/jpeg","image/png","image/gif"];return n.size>2097152?(k.error(" 图片文件最大不能超过2MB!"),!1):o.includes(n.type)?!0:(k.error("请上传图片文件!"),!1)},S=async n=>{const o=new FormData;o.append("file",n.file);try{s.value=!0;const p=await z(o);l.value.imgUrl=p.imgUrl,await m()}catch(p){console.log(p)}finally{s.value=!1}},x=async()=>{r.value&&await r.value.validate((n,o)=>{var p;n&&(l.value.type==="upload"?(p=a.value)==null||p.submit():m())})},m=async()=>{try{s.value=!0,await re({id:l.value.id,link:l.value.link,imgUrl:l.value.imgUrl}),k.success("保存成功"),_("onSuccess"),d()}catch(n){console.log(n),k.error(n.msg??JSON.stringify(n))}finally{s.value=!1}},u=n=>{f.value=!0,n&&(l.value={...l.value,...n})},d=()=>{var n;f.value=!1,(n=r.value)==null||n.resetFields(),l.value=c()};return C({open:u,close:d}),(n,o)=>{const p=i("el-input"),q=i("el-form-item"),L=i("el-radio"),w=i("el-radio-group"),E=i("el-icon"),J=i("el-upload"),B=i("el-form"),F=i("el-button"),T=i("el-dialog");return $(),R(T,{modelValue:f.value,"onUpdate:modelValue":o[4]||(o[4]=y=>f.value=y),title:"添加卡片广告 (建议图片长宽比为16:9)","align-center":"",onClose:d},{footer:t(()=>[A("div",Ne,[e(F,{onClick:d,loading:s.value},{default:t(()=>o[7]||(o[7]=[v("取消")])),_:1,__:[7]},8,["loading"]),e(F,{type:"primary",onClick:x,loading:s.value},{default:t(()=>o[8]||(o[8]=[v(" 保存 ")])),_:1,__:[8]},8,["loading"])])]),default:t(()=>[e(B,{model:l.value,rules:U,ref_key:"formRef",ref:r,"label-width":"8rem"},{default:t(()=>[e(q,{label:"链接地址",prop:"link"},{default:t(()=>[e(p,{modelValue:l.value.link,"onUpdate:modelValue":o[0]||(o[0]=y=>l.value.link=y)},null,8,["modelValue"])]),_:1}),e(q,{label:"图片类型",prop:"type"},{default:t(()=>[e(w,{modelValue:l.value.type,"onUpdate:modelValue":o[1]||(o[1]=y=>l.value.type=y)},{default:t(()=>[e(L,{value:"link"},{default:t(()=>o[5]||(o[5]=[v("第三方图片")])),_:1,__:[5]}),e(L,{value:"upload"},{default:t(()=>o[6]||(o[6]=[v("本地上传")])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1}),l.value.type==="link"?($(),R(q,{key:0,label:"图片地址",prop:"imgUrl"},{default:t(()=>[e(p,{modelValue:l.value.imgUrl,"onUpdate:modelValue":o[2]||(o[2]=y=>l.value.imgUrl=y)},null,8,["modelValue"])]),_:1})):M("",!0),l.value.type==="upload"?($(),R(q,{key:1,label:"图片上传",prop:"file"},{default:t(()=>[e(J,{ref_key:"uploadRef",ref:a,"file-list":l.value.file,"onUpdate:fileList":o[3]||(o[3]=y=>l.value.file=y),action:"","list-type":"picture-card","http-request":S,limit:1,"auto-upload":!1,accept:"image/*","before-upload":b},{default:t(()=>[e(E,null,{default:t(()=>[e(Z(P))]),_:1})]),_:1},8,["file-list"])]),_:1})):M("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Ee={class:"flex flex-col gap-4"},Je={class:"text-base font-bold flex items-center justify-between"},Be=O({__name:"AdCardContent",props:{siteData:{}},emits:["onSuccess"],setup(D,{emit:C}){const g=D,f=C,_=V(),s=()=>{_.value&&_.value.open()},c=async l=>{try{await se(l),k.success("删除成功"),f("onSuccess")}catch(a){k.error(a.msg??JSON.stringify(a))}};return(l,a)=>{const r=i("el-button"),U=i("el-image"),b=i("el-table-column"),S=i("el-popconfirm"),x=i("el-table");return $(),N(X,null,[A("div",Ee,[A("h2",Je,[a[2]||(a[2]=v(" 卡片图片广告 ")),e(r,{type:"primary",onClick:s},{default:t(()=>a[1]||(a[1]=[v("添加")])),_:1,__:[1]})]),e(x,{data:g.siteData.adCard,stripe:"",border:""},{default:t(()=>[e(b,{label:"图片",prop:"imgUrl","max-width":"1000"},{default:t(m=>[e(U,{src:m.row.imgUrl,style:{height:"60px",width:"auto"}},null,8,["src"])]),_:1}),e(b,{label:"链接地址",prop:"link"}),e(b,{label:"操作",width:"160"},{default:t(m=>[e(S,{title:"确定要删除吗？",onConfirm:u=>c(m.row.id)},{reference:t(()=>[e(r,{type:"danger",onClick:m.row,link:""},{default:t(()=>a[3]||(a[3]=[v("删除")])),_:2,__:[3]},1032,["onClick"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),e(Me,{ref_key:"dialogAdCardRef",ref:_,onOnSuccess:a[0]||(a[0]=m=>f("onSuccess"))},null,512)],64)}}}),Te={class:"dialog-footer"},Ie=O({__name:"DialogAdFloat",props:{visible:{type:Boolean},visibleModifiers:{}},emits:I(["onSuccess"],["update:visible"]),setup(D,{expose:C,emit:g}){const f=j(D,"visible"),_=g,s=V(!1),c=()=>({id:"",type:"link",link:"",position:"left",imgUrl:"",file:[]}),l=V(c()),a=V(),r=V(),U={link:[{required:!0,message:"请输入链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],position:[{required:!0,message:"请选择悬浮位置",trigger:"blur"}],imgUrl:[{required:!0,message:"请输入图片链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择图片类型",trigger:"blur"}],file:[{required:!0,message:"请选择图片",trigger:"change"}]},b=n=>{const o=["image/jpeg","image/png","image/gif"];return n.size>2097152?(k.error(" 图片文件最大不能超过2MB!"),!1):o.includes(n.type)?!0:(k.error("请上传图片文件!"),!1)},S=async n=>{const o=new FormData;o.append("file",n.file);try{s.value=!0;const p=await z(o);l.value.imgUrl=p.imgUrl,await m()}catch(p){console.log(p)}finally{s.value=!1}},x=async()=>{r.value&&await r.value.validate((n,o)=>{var p;n&&(l.value.type==="upload"?(p=a.value)==null||p.submit():m())})},m=async()=>{try{s.value=!0;for(let n=0;n<4;n++)await ue({id:l.value.id,position:l.value.position,link:l.value.link,imgUrl:l.value.imgUrl});k.success("保存成功"),_("onSuccess"),d()}catch(n){console.log(n),k.error(n.msg??JSON.stringify(n))}finally{s.value=!1}},u=n=>{f.value=!0,n&&(l.value={...l.value,...n})},d=()=>{var n;f.value=!1,(n=r.value)==null||n.resetFields(),l.value=c()};return C({open:u,close:d}),(n,o)=>{const p=i("el-radio"),q=i("el-radio-group"),L=i("el-form-item"),w=i("el-input"),E=i("el-icon"),J=i("el-upload"),B=i("el-form"),F=i("el-button"),T=i("el-dialog");return $(),R(T,{modelValue:f.value,"onUpdate:modelValue":o[5]||(o[5]=y=>f.value=y),title:"添加悬浮广告 (建议图片长宽比为1:1)","align-center":"",onClose:d},{footer:t(()=>[A("div",Te,[e(F,{onClick:d,loading:s.value},{default:t(()=>o[10]||(o[10]=[v("取消")])),_:1,__:[10]},8,["loading"]),e(F,{type:"primary",onClick:x,loading:s.value},{default:t(()=>o[11]||(o[11]=[v(" 保存 ")])),_:1,__:[11]},8,["loading"])])]),default:t(()=>[e(B,{model:l.value,rules:U,ref_key:"formRef",ref:r,"label-width":"8rem"},{default:t(()=>[e(L,{label:"显示位置",prop:"position"},{default:t(()=>[e(q,{modelValue:l.value.position,"onUpdate:modelValue":o[0]||(o[0]=y=>l.value.position=y)},{default:t(()=>[e(p,{value:"left"},{default:t(()=>o[6]||(o[6]=[v("左")])),_:1,__:[6]}),e(p,{value:"right"},{default:t(()=>o[7]||(o[7]=[v("右")])),_:1,__:[7]})]),_:1},8,["modelValue"])]),_:1}),e(L,{label:"链接地址",prop:"link"},{default:t(()=>[e(w,{modelValue:l.value.link,"onUpdate:modelValue":o[1]||(o[1]=y=>l.value.link=y)},null,8,["modelValue"])]),_:1}),e(L,{label:"图片类型",prop:"type"},{default:t(()=>[e(q,{modelValue:l.value.type,"onUpdate:modelValue":o[2]||(o[2]=y=>l.value.type=y)},{default:t(()=>[e(p,{value:"link"},{default:t(()=>o[8]||(o[8]=[v("第三方图片")])),_:1,__:[8]}),e(p,{value:"upload"},{default:t(()=>o[9]||(o[9]=[v("本地上传")])),_:1,__:[9]})]),_:1},8,["modelValue"])]),_:1}),l.value.type==="link"?($(),R(L,{key:0,label:"图片地址",prop:"imgUrl"},{default:t(()=>[e(w,{modelValue:l.value.imgUrl,"onUpdate:modelValue":o[3]||(o[3]=y=>l.value.imgUrl=y)},null,8,["modelValue"])]),_:1})):M("",!0),l.value.type==="upload"?($(),R(L,{key:1,label:"图片上传",prop:"file"},{default:t(()=>[e(J,{ref_key:"uploadRef",ref:a,"file-list":l.value.file,"onUpdate:fileList":o[4]||(o[4]=y=>l.value.file=y),action:"","list-type":"picture-card","http-request":S,limit:1,"auto-upload":!1,accept:"image/*","before-upload":b},{default:t(()=>[e(E,null,{default:t(()=>[e(Z(P))]),_:1})]),_:1},8,["file-list"])]),_:1})):M("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),je={class:"flex flex-col gap-4"},Xe={class:"text-base font-bold flex items-center justify-between"},Ze=O({__name:"AdFloatContent",props:{siteData:{}},emits:["onSuccess"],setup(D,{emit:C}){const g=D,f=C,_=V(),s=()=>{_.value&&_.value.open()},c=async l=>{try{await de(l),k.success("删除成功"),f("onSuccess")}catch(a){k.error(a.msg??JSON.stringify(a))}};return(l,a)=>{const r=i("el-button"),U=i("el-image"),b=i("el-table-column"),S=i("el-tag"),x=i("el-popconfirm"),m=i("el-table");return $(),N(X,null,[A("div",je,[A("h2",Xe,[a[2]||(a[2]=v(" 悬浮广告 ")),e(r,{type:"primary",onClick:s},{default:t(()=>a[1]||(a[1]=[v("添加")])),_:1,__:[1]})]),e(m,{data:g.siteData.adFloat,stripe:"",border:""},{default:t(()=>[e(b,{label:"图片",prop:"imgUrl","max-width":"1000"},{default:t(u=>[e(U,{src:u.row.imgUrl,style:{height:"60px",width:"auto"}},null,8,["src"])]),_:1}),e(b,{label:"链接地址",prop:"link"}),e(b,{label:"显示位置",prop:"position"},{default:t(u=>[u.row.position==="left"?($(),R(S,{key:0,type:"primary"},{default:t(()=>a[3]||(a[3]=[v("左")])),_:1,__:[3]})):($(),R(S,{key:1,type:"success"},{default:t(()=>a[4]||(a[4]=[v("右")])),_:1,__:[4]}))]),_:1}),e(b,{label:"操作",width:"160"},{default:t(u=>[e(x,{title:"确定要删除吗？",onConfirm:d=>c(u.row.id)},{reference:t(()=>[e(r,{type:"danger",onClick:u.row,link:""},{default:t(()=>a[5]||(a[5]=[v("删除")])),_:2,__:[5]},1032,["onClick"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),e(Ie,{ref_key:"dialogAdFloatRef",ref:_,onOnSuccess:a[0]||(a[0]=u=>f("onSuccess"))},null,512)],64)}}}),Pe={class:"flex justify-between items-center"},ze={class:"flex flex-col gap-8"},Ye={class:"flex flex-col gap-4"},Ge={class:"flex flex-col gap-4"},He={class:"grid grid-cols-4 gap-4"},Ke=O({__name:"AdContent",setup(D){const C=V(!1),g=V({siteName:"",marquee:{text:"",link:"",textColor:"",bgColor:""},links:[],adList:[],adTable:[],adApp:[],adCard:[],adFloat:[]}),f=async()=>{try{C.value=!0,await _e(g.value),k.success("保存成功"),await Y()}catch(s){console.log(s),k.error(s.msg??JSON.stringify(s))}finally{C.value=!1}},_=async()=>{try{C.value=!0;const s=await Y();g.value={...g.value,...s}}catch(s){console.log(s),k.error(s.msg??JSON.stringify(s))}finally{C.value=!1}};return me(()=>{_()}),(s,c)=>{const l=i("el-button"),a=i("el-input"),r=i("el-form-item"),U=i("el-form"),b=i("el-card"),S=pe("loading");return $(),N("div",null,[e(b,null,{header:t(()=>[A("div",Pe,[c[6]||(c[6]=A("div",null,"网站管理",-1)),e(l,{type:"success",onClick:f,loading:C.value},{default:t(()=>c[5]||(c[5]=[v("保存")])),_:1,__:[5]},8,["loading"])])]),default:t(()=>[fe(($(),N("div",null,[e(U,{model:g.value},{default:t(()=>[A("div",ze,[A("div",Ye,[c[7]||(c[7]=A("h2",{class:"text-base font-bold"},"网站信息",-1)),e(r,{label:"网站名称",prop:"siteTitle"},{default:t(()=>[e(a,{modelValue:g.value.siteName,"onUpdate:modelValue":c[0]||(c[0]=x=>g.value.siteName=x)},null,8,["modelValue"])]),_:1})]),A("div",Ge,[c[8]||(c[8]=A("h2",{class:"text-base font-bold"},"跑马灯设置",-1)),A("div",He,[e(r,{label:"跑马灯文字",prop:"marquee.text"},{default:t(()=>[e(a,{modelValue:g.value.marquee.text,"onUpdate:modelValue":c[1]||(c[1]=x=>g.value.marquee.text=x)},null,8,["modelValue"])]),_:1}),e(r,{label:"跑马灯链接",prop:"marquee.link"},{default:t(()=>[e(a,{modelValue:g.value.marquee.link,"onUpdate:modelValue":c[2]||(c[2]=x=>g.value.marquee.link=x)},null,8,["modelValue"])]),_:1}),e(r,{label:"跑马灯文字颜色",prop:"marquee.textColor"},{default:t(()=>[e(a,{modelValue:g.value.marquee.textColor,"onUpdate:modelValue":c[3]||(c[3]=x=>g.value.marquee.textColor=x)},null,8,["modelValue"])]),_:1}),e(r,{label:"跑马灯背景颜色",prop:"marquee.bgColor"},{default:t(()=>[e(a,{modelValue:g.value.marquee.bgColor,"onUpdate:modelValue":c[4]||(c[4]=x=>g.value.marquee.bgColor=x)},null,8,["modelValue"])]),_:1})])]),e(ye,{"site-data":g.value,onOnSuccess:_},null,8,["site-data"]),e(Ue,{"site-data":g.value,onOnSuccess:_},null,8,["site-data"]),e(Fe,{"site-data":g.value,onOnSuccess:_},null,8,["site-data"]),e(Be,{"site-data":g.value,onOnSuccess:_},null,8,["site-data"]),e($e,{"site-data":g.value,onOnSuccess:_},null,8,["site-data"]),e(Ze,{"site-data":g.value,onOnSuccess:_},null,8,["site-data"])])]),_:1},8,["model"])])),[[S,C.value]])]),_:1})])}}}),el=O({__name:"Dashboard",setup(D){return(C,g)=>($(),R(G,null,{header:t(()=>[e(K)]),aside:t(()=>[e(H)]),default:t(()=>[e(Ke)]),_:1}))}});export{el as default};
