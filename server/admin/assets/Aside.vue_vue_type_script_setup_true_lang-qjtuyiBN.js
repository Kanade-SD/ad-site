import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as h,w as e,b as t,S as C,a as s,o as v,d as $,u as F,r as w,f,g as y,T as L,E as D,U as O,j as S,t as V,e as p,F as M,V as z,I as T,W as j,X as A,N as I,Y as W}from"./index-DwzN7YAn.js";const X={};function q(u,c){const n=s("el-header"),l=s("el-aside"),_=s("el-main"),r=s("el-container");return v(),h(r,{class:"h-screen"},{default:e(()=>[t(n,{class:"bg-[var(--el-color-primary)] text-[var(--el-color-white)]"},{default:e(()=>[C(u.$slots,"header",{},void 0,!0)]),_:3}),t(r,null,{default:e(()=>[t(l,{class:"aside-box !w-fit md:!w-[240px]"},{default:e(()=>[C(u.$slots,"aside",{},void 0,!0)]),_:3}),t(_,{class:"bg-(--el-bg-color-page)"},{default:e(()=>[C(u.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3})}const le=P(X,[["render",q],["__scopeId","data-v-1f9c0d94"]]),H={class:"dialog-footer"},J=$({__name:"DialogPassword",props:{visible:{type:Boolean},visibleModifiers:{}},emits:["update:visible"],setup(u,{expose:c}){const n=F(u,"visible"),l=w(!1),_=()=>({id:"",password:""}),r=w(_()),a=w(),x={password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:32,message:"密码长度在 6 到 32 个字符",trigger:"blur"}]},g=()=>{a.value&&a.value.validate((o,d)=>{o&&m()})},m=async()=>{try{l.value=!0,await L(r.value.id,r.value.password),D.success("密码修改成功"),i()}catch(o){console.log(o),D.error(o.msg??JSON.stringify(o))}finally{l.value=!1}},b=o=>{r.value.id=o,n.value=!0},i=()=>{var o;n.value=!1,(o=a.value)==null||o.resetFields(),r.value=_()};return c({open:b,close:i}),(o,d)=>{const R=s("el-input"),B=s("el-form-item"),E=s("el-form"),U=s("el-button"),N=s("el-dialog");return v(),h(N,{modelValue:n.value,"onUpdate:modelValue":d[1]||(d[1]=k=>n.value=k),title:"修改登录密码","align-center":"",onClose:i,width:"500px"},{footer:e(()=>[f("div",H,[t(U,{onClick:i,loading:l.value},{default:e(()=>d[2]||(d[2]=[y("取消")])),_:1,__:[2]},8,["loading"]),t(U,{type:"primary",onClick:g,loading:l.value},{default:e(()=>d[3]||(d[3]=[y(" 保存 ")])),_:1,__:[3]},8,["loading"])])]),default:e(()=>[t(E,{model:r.value,rules:x,ref_key:"formRef",ref:a},{default:e(()=>[t(B,{label:"新密码",prop:"password"},{default:e(()=>[t(R,{modelValue:r.value.password,"onUpdate:modelValue":d[0]||(d[0]=k=>r.value.password=k)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Y="/assets/avatar-uscRzRXF.png",G={class:"header h-full flex justify-between items-center"},K={class:"logo flex items-center gap-4 text-xl font-bold"},Q={class:"user-info flex items-center gap-2 cursor-pointer"},Z={class:"text-[var(--el-bg-color)]"},ae=$({__name:"Header",setup(u){const c="网站后台管理系统",n=O(),l=w(),_=()=>n.signOut();return(r,a)=>{const x=s("el-avatar"),g=s("el-dropdown-item"),m=s("el-dropdown-menu"),b=s("el-dropdown");return v(),S(M,null,[f("div",G,[f("div",K,V(p(c)),1),f("div",null,[t(b,{trigger:"click"},{dropdown:e(()=>[t(m,null,{default:e(()=>[t(g,{onClick:a[0]||(a[0]=i=>{var o,d;return(d=l.value)==null?void 0:d.open((o=p(n).user)==null?void 0:o.id)})},{default:e(()=>a[1]||(a[1]=[y(" 修改密码 ")])),_:1,__:[1]}),t(g,{onClick:_},{default:e(()=>a[2]||(a[2]=[y("退出登录")])),_:1,__:[2]})]),_:1})]),default:e(()=>{var i,o;return[f("div",Q,[t(x,{src:((i=p(n).user)==null?void 0:i.avatar)||p(Y)},null,8,["src"]),f("span",Z,V((o=p(n).user)==null?void 0:o.username),1)])]}),_:1})])]),t(J,{ref_key:"dialogPasswordRef",ref:l},null,512)],64)}}}),ee=z("menu",()=>{const u=w([{name:"dashboard",title:"网站管理",path:"dashboard",icon:"Odometer"},{name:"users",title:"用户管理",path:"users",icon:"User"}]);return{menu:u,setMenu:n=>{u.value=n}}}),oe={class:"flex flex-col h-full"},te={class:"flex-1"},re=$({__name:"Aside",setup(u){const c=ee(),n=A(),l=w(!1);return T(()=>{window.addEventListener("resize",()=>{window.innerWidth<768?l.value=!0:l.value=!1})}),j(()=>{window.removeEventListener("resize",()=>{})}),(_,r)=>{const a=s("el-icon"),x=s("el-menu-item"),g=s("el-menu");return v(),S("div",oe,[f("div",te,[t(g,{router:"","default-active":p(n).name,class:"h-full",collapse:l.value},{default:e(()=>[(v(!0),S(M,null,I(p(c).menu,(m,b)=>(v(),h(x,{key:b,index:m.name},{title:e(()=>[y(V(m.title),1)]),default:e(()=>[t(a,null,{default:e(()=>[(v(),h(W(m.icon)))]),_:2},1024)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active","collapse"])])])}}});export{le as D,re as _,ae as a,J as b};
