import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as h,w as e,b as t,R as C,a as s,o as v,d as $,u as P,r as w,e as f,f as y,S as F,E as U,T as N,i as S,O as V,l as p,F as D,U as z,G as T,V as A,W,L as X,X as j}from"./index-DoZ0MByD.js";const q={};function G(i,c){const n=s("el-header"),l=s("el-aside"),_=s("el-main"),r=s("el-container");return v(),h(r,{class:"h-screen"},{default:e(()=>[t(n,{class:"bg-[var(--el-color-primary)] text-[var(--el-color-white)]"},{default:e(()=>[C(i.$slots,"header",{},void 0,!0)]),_:3}),t(r,null,{default:e(()=>[t(l,{class:"aside-box !w-fit md:!w-[240px]"},{default:e(()=>[C(i.$slots,"aside",{},void 0,!0)]),_:3}),t(_,{class:"bg-(--el-bg-color-page)"},{default:e(()=>[C(i.$slots,"default",{},void 0,!0)]),_:3})]),_:3})]),_:3})}const le=O(q,[["render",G],["__scopeId","data-v-1f9c0d94"]]),H={class:"dialog-footer"},I=$({__name:"DialogPassword",props:{visible:{type:Boolean},visibleModifiers:{}},emits:["update:visible"],setup(i,{expose:c}){const n=P(i,"visible"),l=w(!1),_=()=>({id:"",password:""}),r=w(_()),a=w(),x={password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:32,message:"密码长度在 6 到 32 个字符",trigger:"blur"}]},g=()=>{a.value&&a.value.validate((o,d)=>{o&&m()})},m=async()=>{try{l.value=!0,await F(r.value.id,r.value.password),U.success("密码修改成功"),u()}catch(o){console.log(o),U.error(o.msg??JSON.stringify(o))}finally{l.value=!1}},b=o=>{r.value.id=o,n.value=!0},u=()=>{var o;n.value=!1,(o=a.value)==null||o.resetFields(),r.value=_()};return c({open:b,close:u}),(o,d)=>{const M=s("el-input"),B=s("el-form-item"),E=s("el-form"),R=s("el-button"),L=s("el-dialog");return v(),h(L,{modelValue:n.value,"onUpdate:modelValue":d[1]||(d[1]=k=>n.value=k),title:"修改登录密码","align-center":"",onClose:u,width:"500px"},{footer:e(()=>[f("div",H,[t(R,{onClick:u,loading:l.value},{default:e(()=>d[2]||(d[2]=[y("取消")])),_:1,__:[2]},8,["loading"]),t(R,{type:"primary",onClick:g,loading:l.value},{default:e(()=>d[3]||(d[3]=[y(" 保存 ")])),_:1,__:[3]},8,["loading"])])]),default:e(()=>[t(E,{model:r.value,rules:x,ref_key:"formRef",ref:a},{default:e(()=>[t(B,{label:"新密码",prop:"password"},{default:e(()=>[t(M,{modelValue:r.value.password,"onUpdate:modelValue":d[0]||(d[0]=k=>r.value.password=k)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),J="/admin/assets/avatar-uscRzRXF.png",K={class:"header h-full flex justify-between items-center"},Q={class:"logo flex items-center gap-4 text-xl font-bold"},Y={class:"user-info flex items-center gap-2 cursor-pointer"},Z={class:"text-[var(--el-bg-color)]"},ae=$({__name:"Header",setup(i){const c="网站后台管理系统",n=N(),l=w(),_=()=>n.signOut();return(r,a)=>{const x=s("el-avatar"),g=s("el-dropdown-item"),m=s("el-dropdown-menu"),b=s("el-dropdown");return v(),S(D,null,[f("div",K,[f("div",Q,V(p(c)),1),f("div",null,[t(b,{trigger:"click"},{dropdown:e(()=>[t(m,null,{default:e(()=>[t(g,{onClick:a[0]||(a[0]=u=>{var o,d;return(d=l.value)==null?void 0:d.open((o=p(n).user)==null?void 0:o.id)})},{default:e(()=>a[1]||(a[1]=[y(" 修改密码 ")])),_:1,__:[1]}),t(g,{onClick:_},{default:e(()=>a[2]||(a[2]=[y("退出登录")])),_:1,__:[2]})]),_:1})]),default:e(()=>{var u,o;return[f("div",Y,[t(x,{src:((u=p(n).user)==null?void 0:u.avatar)||p(J)},null,8,["src"]),f("span",Z,V((o=p(n).user)==null?void 0:o.username),1)])]}),_:1})])]),t(I,{ref_key:"dialogPasswordRef",ref:l},null,512)],64)}}}),ee=z("menu",()=>{const i=w([{name:"dashboard",title:"网站管理",path:"dashboard",icon:"Odometer"},{name:"users",title:"用户管理",path:"users",icon:"User"}]);return{menu:i,setMenu:n=>{i.value=n}}}),oe={class:"flex flex-col h-full"},te={class:"flex-1"},re=$({__name:"Aside",setup(i){const c=ee(),n=W(),l=w(!1);return T(()=>{window.addEventListener("resize",()=>{window.innerWidth<768?l.value=!0:l.value=!1})}),A(()=>{window.removeEventListener("resize",()=>{})}),(_,r)=>{const a=s("el-icon"),x=s("el-menu-item"),g=s("el-menu");return v(),S("div",oe,[f("div",te,[t(g,{router:"","default-active":p(n).name,class:"h-full",collapse:l.value},{default:e(()=>[(v(!0),S(D,null,X(p(c).menu,(m,b)=>(v(),h(x,{key:b,index:m.name},{title:e(()=>[y(V(m.title),1)]),default:e(()=>[t(a,null,{default:e(()=>[(v(),h(j(m.icon)))]),_:2},1024)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active","collapse"])])])}}});export{le as D,re as _,ae as a,I as b};
