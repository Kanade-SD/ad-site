import{D as Q,_ as W,a as h}from"./Aside.vue_vue_type_script_setup_true_lang-qjtuyiBN.js";import{d as O,m as X,u as Z,r as w,a as n,c as R,o as $,w as t,b as e,e as N,f as x,g as v,h as ee,E as k,i as le,j as E,F as z,n as P,t as Y,k as te,l as J,p as G,q as H,s as oe,v as ae,x as ne,y as ie,z as re,A as se,B as ue,C as de,D as pe,G as me,H as fe,I as _e,J as ce,K as ge,L as ve,M as K}from"./index-DwzN7YAn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const j=["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","#ff1493","#ff69b4","#ffb6c1","#ffc0cb","#dcdcdc","#f5f5f5"],be={class:"dialog-footer"},ye=O({__name:"DialogLink",props:{visible:{type:Boolean},visibleModifiers:{}},emits:X(["onSuccess"],["update:visible"]),setup(A,{expose:C,emit:g}){const f=Z(A,"visible"),_=g,u=w(!1),c=()=>({id:"",text:"",link:"",textColor:"",bgColor:""}),l=w(c()),a=w(),s={text:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:32,message:"长度在 2 到 32 个字符",trigger:"blur"}],link:[{required:!0,message:"请输入链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}]},V=async()=>{a.value&&await a.value.validate((d,p)=>{d?!l.value.id||l.value.id===""?b():S():console.log("error submit!",p)})},b=async()=>{try{u.value=!0,await ee({id:l.value.id,text:l.value.text,link:l.value.link,textColor:l.value.textColor,bgColor:l.value.bgColor}),k.success("保存成功"),_("onSuccess"),r()}catch(d){console.log(d),k.error(d.msg??JSON.stringify(d))}finally{u.value=!1}},S=async()=>{try{u.value=!0,await le({id:l.value.id,text:l.value.text,link:l.value.link,textColor:l.value.textColor,bgColor:l.value.bgColor}),k.success("保存成功"),_("onSuccess"),r()}catch(d){console.log(d),k.error(d.msg??JSON.stringify(d))}finally{u.value=!1}},D=d=>{f.value=!0,d&&(l.value={...l.value,...d})},r=()=>{var d;f.value=!1,(d=a.value)==null||d.resetFields(),l.value=c()};return C({open:D,close:r}),(d,p)=>{const i=n("el-input"),o=n("el-form-item"),m=n("el-color-picker"),q=n("el-form"),L=n("el-button"),F=n("el-dialog");return $(),R(F,{modelValue:f.value,"onUpdate:modelValue":p[4]||(p[4]=U=>f.value=U),title:"设置链接","align-center":"",onClose:r},{footer:t(()=>[x("div",be,[e(L,{onClick:r,loading:u.value},{default:t(()=>p[5]||(p[5]=[v("取消")])),_:1,__:[5]},8,["loading"]),e(L,{type:"primary",onClick:V,loading:u.value},{default:t(()=>p[6]||(p[6]=[v(" 保存 ")])),_:1,__:[6]},8,["loading"])])]),default:t(()=>[e(q,{model:l.value,rules:s,ref_key:"formRef",ref:a,"label-width":"8rem"},{default:t(()=>[e(o,{label:"链接文字",prop:"text"},{default:t(()=>[e(i,{modelValue:l.value.text,"onUpdate:modelValue":p[0]||(p[0]=U=>l.value.text=U)},null,8,["modelValue"])]),_:1}),e(o,{label:"链接地址",prop:"link"},{default:t(()=>[e(i,{modelValue:l.value.link,"onUpdate:modelValue":p[1]||(p[1]=U=>l.value.link=U)},null,8,["modelValue"])]),_:1}),e(o,{label:"链接文字颜色",prop:"textColor"},{default:t(()=>[e(m,{modelValue:l.value.textColor,"onUpdate:modelValue":p[2]||(p[2]=U=>l.value.textColor=U),predefine:N(j)},null,8,["modelValue","predefine"])]),_:1}),e(o,{label:"链接背景颜色",prop:"bgColor"},{default:t(()=>[e(m,{modelValue:l.value.bgColor,"onUpdate:modelValue":p[3]||(p[3]=U=>l.value.bgColor=U),predefine:N(j)},null,8,["modelValue","predefine"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),ke={class:"flex flex-col gap-4"},xe={class:"text-base font-bold flex items-center justify-between"},Ce={class:"flex items-center gap-2"},Ve={class:"flex items-center gap-2"},we=O({__name:"LinksContent",props:{siteData:{}},emits:["onSuccess"],setup(A,{emit:C}){const g=A,f=C,_=w(),u=()=>{_.value&&_.value.open()},c=a=>{_.value&&_.value.open(a)},l=async a=>{try{await te(a),k.success("删除成功"),f("onSuccess")}catch(s){console.log(s),k.error(s.msg??JSON.stringify(s))}};return(a,s)=>{const V=n("el-button"),b=n("el-table-column"),S=n("el-popconfirm"),D=n("el-table");return $(),E(z,null,[x("div",ke,[x("h2",xe,[s[2]||(s[2]=v(" 横幅链接广告 ")),e(V,{type:"primary",onClick:u},{default:t(()=>s[1]||(s[1]=[v("添加")])),_:1,__:[1]})]),e(D,{data:g.siteData.links,stripe:"",border:""},{default:t(()=>[e(b,{label:"链接文字",prop:"text"}),e(b,{label:"链接地址",prop:"link"}),e(b,{label:"文字颜色",prop:"textColor"},{default:t(r=>[x("div",Ce,[x("div",{class:"w-6 h-6 rounded-md",style:P({backgroundColor:r.row.textColor})},null,4),x("div",null,Y(r.row.textColor),1)])]),_:1}),e(b,{label:"背景颜色",prop:"bgColor"},{default:t(r=>[x("div",Ve,[x("div",{class:"w-6 h-6 rounded-md",style:P({backgroundColor:r.row.bgColor})},null,4),x("div",null,Y(r.row.bgColor),1)])]),_:1}),e(b,{label:"操作",width:"160"},{default:t(r=>[e(V,{type:"primary",link:"",onClick:d=>c(r.row)},{default:t(()=>s[3]||(s[3]=[v(" 编辑 ")])),_:2,__:[3]},1032,["onClick"]),e(S,{title:"确定要删除吗？",onConfirm:d=>l(r.row.id)},{reference:t(()=>[e(V,{type:"danger",onClick:r.row,link:""},{default:t(()=>s[4]||(s[4]=[v("删除")])),_:2,__:[4]},1032,["onClick"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),e(ye,{ref_key:"dialogLinkRef",ref:_,onOnSuccess:s[0]||(s[0]=r=>f("onSuccess"))},null,512)],64)}}}),Ue={class:"dialog-footer"},Se=O({__name:"DialogAd",props:{visible:{type:Boolean},visibleModifiers:{}},emits:X(["onSuccess"],["update:visible"]),setup(A,{expose:C,emit:g}){const f=Z(A,"visible"),_=g,u=w(!1),c=()=>({id:"",type:"link",link:"",imgUrl:"",file:[]}),l=w(c()),a=w(),s=w(),V={link:[{required:!0,message:"请输入链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择图片类型",trigger:"change"}],imgUrl:[{required:!0,message:"请输入图片链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],file:[{required:!0,message:"请选择图片",trigger:"change"}]},b=i=>{const o=["image/jpeg","image/png","image/gif"];return i.size>2097152?(k.error(" 图片文件最大不能超过2MB!"),!1):o.includes(i.type)?!0:(k.error("请上传图片文件!"),!1)},S=async i=>{const o=new FormData;o.append("file",i.file);try{u.value=!0;const m=await H(o);l.value.imgUrl=m.imgUrl,await r()}catch(m){console.log(m)}finally{u.value=!1}},D=async()=>{s.value&&await s.value.validate((i,o)=>{var m;i&&(l.value.type==="upload"?(m=a.value)==null||m.submit():r())})},r=async()=>{try{u.value=!0,await oe({id:l.value.id,imgUrl:l.value.imgUrl,link:l.value.link}),k.success("保存成功"),_("onSuccess"),p()}catch(i){console.log(i),k.error(i.msg??JSON.stringify(i))}finally{u.value=!1}},d=i=>{f.value=!0,i&&(l.value={...l.value,...i})},p=()=>{var i;f.value=!1,(i=s.value)==null||i.resetFields(),l.value=c()};return C({open:d,close:p}),(i,o)=>{const m=n("el-input"),q=n("el-form-item"),L=n("el-radio"),F=n("el-radio-group"),U=n("el-icon"),B=n("el-upload"),T=n("el-form"),M=n("el-button"),I=n("el-dialog");return $(),R(I,{modelValue:f.value,"onUpdate:modelValue":o[4]||(o[4]=y=>f.value=y),title:"添加横幅 (建议图片长宽比为8:1)","align-center":"",onClose:p},{footer:t(()=>[x("div",Ue,[e(M,{onClick:p,loading:u.value},{default:t(()=>o[7]||(o[7]=[v("取消")])),_:1,__:[7]},8,["loading"]),e(M,{type:"primary",onClick:D,loading:u.value},{default:t(()=>o[8]||(o[8]=[v(" 保存 ")])),_:1,__:[8]},8,["loading"])])]),default:t(()=>[e(T,{model:l.value,rules:V,ref_key:"formRef",ref:s,"label-width":"8rem"},{default:t(()=>[e(q,{label:"链接地址",prop:"link"},{default:t(()=>[e(m,{modelValue:l.value.link,"onUpdate:modelValue":o[0]||(o[0]=y=>l.value.link=y)},null,8,["modelValue"])]),_:1}),e(q,{label:"图片类型",prop:"type"},{default:t(()=>[e(F,{modelValue:l.value.type,"onUpdate:modelValue":o[1]||(o[1]=y=>l.value.type=y)},{default:t(()=>[e(L,{value:"link"},{default:t(()=>o[5]||(o[5]=[v("第三方图片")])),_:1,__:[5]}),e(L,{value:"upload"},{default:t(()=>o[6]||(o[6]=[v("本地上传")])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1}),l.value.type==="link"?($(),R(q,{key:0,label:"图片地址",prop:"imgUrl"},{default:t(()=>[e(m,{modelValue:l.value.imgUrl,"onUpdate:modelValue":o[2]||(o[2]=y=>l.value.imgUrl=y)},null,8,["modelValue"])]),_:1})):J("",!0),l.value.type==="upload"?($(),R(q,{key:1,label:"图片上传",prop:"file"},{default:t(()=>[e(B,{ref_key:"uploadRef",ref:a,"file-list":l.value.file,"onUpdate:fileList":o[3]||(o[3]=y=>l.value.file=y),action:"","list-type":"picture-card","http-request":S,limit:1,"auto-upload":!1,accept:"image/*","before-upload":b},{default:t(()=>[e(U,null,{default:t(()=>[e(N(G))]),_:1})]),_:1},8,["file-list"])]),_:1})):J("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Ae={class:"flex flex-col gap-4"},De={class:"text-base font-bold flex items-center justify-between"},$e=O({__name:"AdListContent",props:{siteData:{}},emits:["onSuccess"],setup(A,{emit:C}){const g=A,f=C,_=w(),u=()=>{_.value&&_.value.open()},c=async l=>{try{await ae(l),k.success("删除成功"),f("onSuccess")}catch(a){k.error(a.msg??JSON.stringify(a))}};return(l,a)=>{const s=n("el-button"),V=n("el-image"),b=n("el-table-column"),S=n("el-popconfirm"),D=n("el-table");return $(),E(z,null,[x("div",Ae,[x("h2",De,[a[2]||(a[2]=v(" 横幅图片广告 ")),e(s,{type:"primary",onClick:u},{default:t(()=>a[1]||(a[1]=[v("添加")])),_:1,__:[1]})]),e(D,{data:g.siteData.adList,stripe:"",border:""},{default:t(()=>[e(b,{label:"图片",prop:"imgUrl","max-width":"1000"},{default:t(r=>[e(V,{src:r.row.imgUrl,style:{height:"60px",width:"auto"}},null,8,["src"])]),_:1}),e(b,{label:"链接地址",prop:"link"}),e(b,{label:"操作",width:"160"},{default:t(r=>[e(S,{title:"确定要删除吗？",onConfirm:d=>c(r.row.id)},{reference:t(()=>[e(s,{type:"danger",onClick:r.row,link:""},{default:t(()=>a[3]||(a[3]=[v("删除")])),_:2,__:[3]},1032,["onClick"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),e(Se,{ref_key:"dialogAdRef",ref:_,onOnSuccess:a[0]||(a[0]=r=>f("onSuccess"))},null,512)],64)}}}),qe={class:"dialog-footer"},Le=O({__name:"DialogTableLink",props:{visible:{type:Boolean},visibleModifiers:{}},emits:X(["onSuccess"],["update:visible"]),setup(A,{expose:C,emit:g}){const f=Z(A,"visible"),_=g,u=w(!1),c=()=>({id:"",text:"",link:"",textColor:"",bgColor:""}),l=w(c()),a=w(),s={text:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:32,message:"长度在 2 到 32 个字符",trigger:"blur"}],link:[{required:!0,message:"请输入链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}]},V=async()=>{a.value&&await a.value.validate((d,p)=>{d?!l.value.id||l.value.id===""?b():S():console.log("error submit!",p)})},b=async()=>{try{u.value=!0,await ne({text:l.value.text,link:l.value.link,textColor:l.value.textColor,bgColor:l.value.bgColor}),k.success("保存成功"),_("onSuccess"),r()}catch(d){console.log(d),k.error(d.msg??JSON.stringify(d))}finally{u.value=!1}},S=async()=>{try{u.value=!0,await ie({id:l.value.id,text:l.value.text,link:l.value.link,textColor:l.value.textColor,bgColor:l.value.bgColor}),k.success("保存成功"),_("onSuccess"),r()}catch(d){console.log(d),k.error(d.msg??JSON.stringify(d))}finally{u.value=!1}},D=d=>{f.value=!0,d&&(l.value={...l.value,...d})},r=()=>{var d;f.value=!1,(d=a.value)==null||d.resetFields(),l.value=c()};return C({open:D,close:r}),(d,p)=>{const i=n("el-input"),o=n("el-form-item"),m=n("el-color-picker"),q=n("el-form"),L=n("el-button"),F=n("el-dialog");return $(),R(F,{modelValue:f.value,"onUpdate:modelValue":p[4]||(p[4]=U=>f.value=U),title:"设置列表链接","align-center":"",onClose:r},{footer:t(()=>[x("div",qe,[e(L,{onClick:r,loading:u.value},{default:t(()=>p[5]||(p[5]=[v("取消")])),_:1,__:[5]},8,["loading"]),e(L,{type:"primary",onClick:V,loading:u.value},{default:t(()=>p[6]||(p[6]=[v(" 保存 ")])),_:1,__:[6]},8,["loading"])])]),default:t(()=>[e(q,{model:l.value,rules:s,ref_key:"formRef",ref:a,"label-width":"8rem"},{default:t(()=>[e(o,{label:"链接文字",prop:"text"},{default:t(()=>[e(i,{modelValue:l.value.text,"onUpdate:modelValue":p[0]||(p[0]=U=>l.value.text=U)},null,8,["modelValue"])]),_:1}),e(o,{label:"链接地址",prop:"link"},{default:t(()=>[e(i,{modelValue:l.value.link,"onUpdate:modelValue":p[1]||(p[1]=U=>l.value.link=U)},null,8,["modelValue"])]),_:1}),e(o,{label:"链接文字颜色",prop:"textColor"},{default:t(()=>[e(m,{modelValue:l.value.textColor,"onUpdate:modelValue":p[2]||(p[2]=U=>l.value.textColor=U),predefine:N(j)},null,8,["modelValue","predefine"])]),_:1}),e(o,{label:"链接背景颜色",prop:"bgColor"},{default:t(()=>[e(m,{modelValue:l.value.bgColor,"onUpdate:modelValue":p[3]||(p[3]=U=>l.value.bgColor=U),predefine:N(j)},null,8,["modelValue","predefine"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Re={class:"flex flex-col gap-4"},Oe={class:"text-base font-bold flex items-center justify-between"},Fe={class:"flex items-center gap-2"},Me={class:"flex items-center gap-2"},Ne=O({__name:"AdTableContent",props:{siteData:{}},emits:["onSuccess"],setup(A,{emit:C}){const g=A,f=C,_=w(),u=()=>{_.value&&_.value.open()},c=a=>{_.value&&_.value.open(a)},l=async a=>{try{await re(a),k.success("删除成功"),f("onSuccess")}catch(s){console.log(s),k.error(s.msg??JSON.stringify(s))}};return(a,s)=>{const V=n("el-button"),b=n("el-table-column"),S=n("el-popconfirm"),D=n("el-table");return $(),E(z,null,[x("div",Re,[x("h2",Oe,[s[2]||(s[2]=v(" 列表链接广告 ")),e(V,{type:"primary",onClick:u},{default:t(()=>s[1]||(s[1]=[v("添加")])),_:1,__:[1]})]),e(D,{data:g.siteData.adTable,stripe:"",border:""},{default:t(()=>[e(b,{label:"链接文字",prop:"text"}),e(b,{label:"链接地址",prop:"link"}),e(b,{label:"文字颜色",prop:"textColor"},{default:t(r=>[x("div",Fe,[x("div",{class:"w-6 h-6 rounded-md",style:P({backgroundColor:r.row.textColor})},null,4),x("div",null,Y(r.row.textColor),1)])]),_:1}),e(b,{label:"背景颜色",prop:"bgColor"},{default:t(r=>[x("div",Me,[x("div",{class:"w-6 h-6 rounded-md",style:P({backgroundColor:r.row.bgColor})},null,4),x("div",null,Y(r.row.bgColor),1)])]),_:1}),e(b,{label:"操作",width:"160"},{default:t(r=>[e(V,{type:"primary",link:"",onClick:d=>c(r.row)},{default:t(()=>s[3]||(s[3]=[v(" 编辑 ")])),_:2,__:[3]},1032,["onClick"]),e(S,{title:"确定要删除吗？",onConfirm:d=>l(r.row.id)},{reference:t(()=>[e(V,{type:"danger",onClick:r.row,link:""},{default:t(()=>s[4]||(s[4]=[v("删除")])),_:2,__:[4]},1032,["onClick"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),e(Le,{ref_key:"dialogTableLinkRef",ref:_,onOnSuccess:s[0]||(s[0]=r=>f("onSuccess"))},null,512)],64)}}}),Ee={class:"dialog-footer"},Je=O({__name:"DialogAdApp",props:{visible:{type:Boolean},visibleModifiers:{}},emits:X(["onSuccess"],["update:visible"]),setup(A,{expose:C,emit:g}){const f=Z(A,"visible"),_=g,u=w(!1),c=()=>({id:"",type:"link",link:"",text:"",imgUrl:"",file:[]}),l=w(c()),a=w(),s=w(),V={link:[{required:!0,message:"请输入链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],text:[{required:!0,message:"请输入文字",trigger:"blur"},{min:2,max:32,message:"长度在 2 到 32 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择图片类型",trigger:"change"}],imgUrl:[{required:!0,message:"请输入图片链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],file:[{required:!0,message:"请选择图片",trigger:"change"}]},b=i=>{const o=["image/jpeg","image/png","image/gif"];return i.size>2097152?(k.error(" 图片文件最大不能超过2MB!"),!1):o.includes(i.type)?!0:(k.error("请上传图片文件!"),!1)},S=async i=>{const o=new FormData;o.append("file",i.file);try{u.value=!0;const m=await H(o);l.value.imgUrl=m.imgUrl,await r()}catch(m){console.log(m)}finally{u.value=!1}},D=async()=>{s.value&&await s.value.validate((i,o)=>{var m;i&&(l.value.type==="upload"?(m=a.value)==null||m.submit():r())})},r=async()=>{try{u.value=!0,await se({id:l.value.id,text:l.value.text,link:l.value.link,imgUrl:l.value.imgUrl}),k.success("保存成功"),_("onSuccess"),p()}catch(i){console.log(i),k.error(i.msg??JSON.stringify(i))}finally{u.value=!1}},d=i=>{f.value=!0,i&&(l.value={...l.value,...i})},p=()=>{var i;f.value=!1,(i=s.value)==null||i.resetFields(),l.value=c()};return C({open:d,close:p}),(i,o)=>{const m=n("el-input"),q=n("el-form-item"),L=n("el-radio"),F=n("el-radio-group"),U=n("el-icon"),B=n("el-upload"),T=n("el-form"),M=n("el-button"),I=n("el-dialog");return $(),R(I,{modelValue:f.value,"onUpdate:modelValue":o[5]||(o[5]=y=>f.value=y),title:"添加App广告 (建议图片长宽比为1:1)","align-center":"",onClose:p},{footer:t(()=>[x("div",Ee,[e(M,{onClick:p,loading:u.value},{default:t(()=>o[8]||(o[8]=[v("取消")])),_:1,__:[8]},8,["loading"]),e(M,{type:"primary",onClick:D,loading:u.value},{default:t(()=>o[9]||(o[9]=[v(" 保存 ")])),_:1,__:[9]},8,["loading"])])]),default:t(()=>[e(T,{model:l.value,rules:V,ref_key:"formRef",ref:s,"label-width":"8rem"},{default:t(()=>[e(q,{label:"链接文字",prop:"text"},{default:t(()=>[e(m,{modelValue:l.value.text,"onUpdate:modelValue":o[0]||(o[0]=y=>l.value.text=y)},null,8,["modelValue"])]),_:1}),e(q,{label:"链接地址",prop:"link"},{default:t(()=>[e(m,{modelValue:l.value.link,"onUpdate:modelValue":o[1]||(o[1]=y=>l.value.link=y)},null,8,["modelValue"])]),_:1}),e(q,{label:"图片类型",prop:"type"},{default:t(()=>[e(F,{modelValue:l.value.type,"onUpdate:modelValue":o[2]||(o[2]=y=>l.value.type=y)},{default:t(()=>[e(L,{value:"link"},{default:t(()=>o[6]||(o[6]=[v("第三方图片")])),_:1,__:[6]}),e(L,{value:"upload"},{default:t(()=>o[7]||(o[7]=[v("本地上传")])),_:1,__:[7]})]),_:1},8,["modelValue"])]),_:1}),l.value.type==="link"?($(),R(q,{key:0,label:"图片地址",prop:"imgUrl"},{default:t(()=>[e(m,{modelValue:l.value.imgUrl,"onUpdate:modelValue":o[3]||(o[3]=y=>l.value.imgUrl=y)},null,8,["modelValue"])]),_:1})):J("",!0),l.value.type==="upload"?($(),R(q,{key:1,label:"图片上传",prop:"file"},{default:t(()=>[e(B,{ref_key:"uploadRef",ref:a,"file-list":l.value.file,"onUpdate:fileList":o[4]||(o[4]=y=>l.value.file=y),action:"","list-type":"picture-card","http-request":S,limit:1,"auto-upload":!1,accept:"image/*","before-upload":b},{default:t(()=>[e(U,null,{default:t(()=>[e(N(G))]),_:1})]),_:1},8,["file-list"])]),_:1})):J("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Be={class:"flex flex-col gap-4"},Te={class:"text-base font-bold flex items-center justify-between"},Ie=O({__name:"AdAppContent",props:{siteData:{}},emits:["onSuccess"],setup(A,{emit:C}){const g=A,f=C,_=w(),u=()=>{_.value&&_.value.open()},c=async l=>{try{await ue(l),k.success("删除成功"),f("onSuccess")}catch(a){k.error(a.msg??JSON.stringify(a))}};return(l,a)=>{const s=n("el-button"),V=n("el-image"),b=n("el-table-column"),S=n("el-popconfirm"),D=n("el-table");return $(),E(z,null,[x("div",Be,[x("h2",Te,[a[2]||(a[2]=v(" APP图标广告 ")),e(s,{type:"primary",onClick:u},{default:t(()=>a[1]||(a[1]=[v("添加")])),_:1,__:[1]})]),e(D,{data:g.siteData.adApp,stripe:"",border:""},{default:t(()=>[e(b,{label:"图片",prop:"imgUrl","max-width":"1000"},{default:t(r=>[e(V,{src:r.row.imgUrl,style:{height:"60px",width:"auto"}},null,8,["src"])]),_:1}),e(b,{label:"链接文字",prop:"text"}),e(b,{label:"链接地址",prop:"link"}),e(b,{label:"操作",width:"160"},{default:t(r=>[e(S,{title:"确定要删除吗？",onConfirm:d=>c(r.row.id)},{reference:t(()=>[e(s,{type:"danger",onClick:r.row,link:""},{default:t(()=>a[3]||(a[3]=[v("删除")])),_:2,__:[3]},1032,["onClick"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),e(Je,{ref_key:"dialogAdAppRef",ref:_,onOnSuccess:a[0]||(a[0]=r=>f("onSuccess"))},null,512)],64)}}}),je={class:"dialog-footer"},Xe=O({__name:"DialogAdCard",props:{visible:{type:Boolean},visibleModifiers:{}},emits:X(["onSuccess"],["update:visible"]),setup(A,{expose:C,emit:g}){const f=Z(A,"visible"),_=g,u=w(!1),c=()=>({id:"",type:"link",link:"",imgUrl:"",file:[]}),l=w(c()),a=w(),s=w(),V={link:[{required:!0,message:"请输入链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择图片类型",trigger:"change"}],imgUrl:[{required:!0,message:"请输入图片链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],file:[{required:!0,message:"请选择图片",trigger:"change"}]},b=i=>{const o=["image/jpeg","image/png","image/gif"];return i.size>2097152?(k.error(" 图片文件最大不能超过2MB!"),!1):o.includes(i.type)?!0:(k.error("请上传图片文件!"),!1)},S=async i=>{const o=new FormData;o.append("file",i.file);try{u.value=!0;const m=await H(o);l.value.imgUrl=m.imgUrl,await r()}catch(m){console.log(m)}finally{u.value=!1}},D=async()=>{s.value&&await s.value.validate((i,o)=>{var m;i&&(l.value.type==="upload"?(m=a.value)==null||m.submit():r())})},r=async()=>{try{u.value=!0,await de({id:l.value.id,link:l.value.link,imgUrl:l.value.imgUrl}),k.success("保存成功"),_("onSuccess"),p()}catch(i){console.log(i),k.error(i.msg??JSON.stringify(i))}finally{u.value=!1}},d=i=>{f.value=!0,i&&(l.value={...l.value,...i})},p=()=>{var i;f.value=!1,(i=s.value)==null||i.resetFields(),l.value=c()};return C({open:d,close:p}),(i,o)=>{const m=n("el-input"),q=n("el-form-item"),L=n("el-radio"),F=n("el-radio-group"),U=n("el-icon"),B=n("el-upload"),T=n("el-form"),M=n("el-button"),I=n("el-dialog");return $(),R(I,{modelValue:f.value,"onUpdate:modelValue":o[4]||(o[4]=y=>f.value=y),title:"添加卡片广告 (建议图片长宽比为16:9)","align-center":"",onClose:p},{footer:t(()=>[x("div",je,[e(M,{onClick:p,loading:u.value},{default:t(()=>o[7]||(o[7]=[v("取消")])),_:1,__:[7]},8,["loading"]),e(M,{type:"primary",onClick:D,loading:u.value},{default:t(()=>o[8]||(o[8]=[v(" 保存 ")])),_:1,__:[8]},8,["loading"])])]),default:t(()=>[e(T,{model:l.value,rules:V,ref_key:"formRef",ref:s,"label-width":"8rem"},{default:t(()=>[e(q,{label:"链接地址",prop:"link"},{default:t(()=>[e(m,{modelValue:l.value.link,"onUpdate:modelValue":o[0]||(o[0]=y=>l.value.link=y)},null,8,["modelValue"])]),_:1}),e(q,{label:"图片类型",prop:"type"},{default:t(()=>[e(F,{modelValue:l.value.type,"onUpdate:modelValue":o[1]||(o[1]=y=>l.value.type=y)},{default:t(()=>[e(L,{value:"link"},{default:t(()=>o[5]||(o[5]=[v("第三方图片")])),_:1,__:[5]}),e(L,{value:"upload"},{default:t(()=>o[6]||(o[6]=[v("本地上传")])),_:1,__:[6]})]),_:1},8,["modelValue"])]),_:1}),l.value.type==="link"?($(),R(q,{key:0,label:"图片地址",prop:"imgUrl"},{default:t(()=>[e(m,{modelValue:l.value.imgUrl,"onUpdate:modelValue":o[2]||(o[2]=y=>l.value.imgUrl=y)},null,8,["modelValue"])]),_:1})):J("",!0),l.value.type==="upload"?($(),R(q,{key:1,label:"图片上传",prop:"file"},{default:t(()=>[e(B,{ref_key:"uploadRef",ref:a,"file-list":l.value.file,"onUpdate:fileList":o[3]||(o[3]=y=>l.value.file=y),action:"","list-type":"picture-card","http-request":S,limit:1,"auto-upload":!1,accept:"image/*","before-upload":b},{default:t(()=>[e(U,null,{default:t(()=>[e(N(G))]),_:1})]),_:1},8,["file-list"])]),_:1})):J("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Ze={class:"flex flex-col gap-4"},ze={class:"text-base font-bold flex items-center justify-between"},Pe=O({__name:"AdCardContent",props:{siteData:{}},emits:["onSuccess"],setup(A,{emit:C}){const g=A,f=C,_=w(),u=()=>{_.value&&_.value.open()},c=async l=>{try{await pe(l),k.success("删除成功"),f("onSuccess")}catch(a){k.error(a.msg??JSON.stringify(a))}};return(l,a)=>{const s=n("el-button"),V=n("el-image"),b=n("el-table-column"),S=n("el-popconfirm"),D=n("el-table");return $(),E(z,null,[x("div",Ze,[x("h2",ze,[a[2]||(a[2]=v(" 卡片图片广告 ")),e(s,{type:"primary",onClick:u},{default:t(()=>a[1]||(a[1]=[v("添加")])),_:1,__:[1]})]),e(D,{data:g.siteData.adCard,stripe:"",border:""},{default:t(()=>[e(b,{label:"图片",prop:"imgUrl","max-width":"1000"},{default:t(r=>[e(V,{src:r.row.imgUrl,style:{height:"60px",width:"auto"}},null,8,["src"])]),_:1}),e(b,{label:"链接地址",prop:"link"}),e(b,{label:"操作",width:"160"},{default:t(r=>[e(S,{title:"确定要删除吗？",onConfirm:d=>c(r.row.id)},{reference:t(()=>[e(s,{type:"danger",onClick:r.row,link:""},{default:t(()=>a[3]||(a[3]=[v("删除")])),_:2,__:[3]},1032,["onClick"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),e(Xe,{ref_key:"dialogAdCardRef",ref:_,onOnSuccess:a[0]||(a[0]=r=>f("onSuccess"))},null,512)],64)}}}),Ye={class:"dialog-footer"},Ge=O({__name:"DialogAdFloat",props:{visible:{type:Boolean},visibleModifiers:{}},emits:X(["onSuccess"],["update:visible"]),setup(A,{expose:C,emit:g}){const f=Z(A,"visible"),_=g,u=w(!1),c=()=>({id:"",type:"link",link:"",position:"left",imgUrl:"",file:[]}),l=w(c()),a=w(),s=w(),V={link:[{required:!0,message:"请输入链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],position:[{required:!0,message:"请选择悬浮位置",trigger:"blur"}],imgUrl:[{required:!0,message:"请输入图片链接",trigger:"blur"},{min:2,max:512,message:"长度在 2 到 512 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择图片类型",trigger:"blur"}],file:[{required:!0,message:"请选择图片",trigger:"change"}]},b=i=>{const o=["image/jpeg","image/png","image/gif"];return i.size>2097152?(k.error(" 图片文件最大不能超过2MB!"),!1):o.includes(i.type)?!0:(k.error("请上传图片文件!"),!1)},S=async i=>{const o=new FormData;o.append("file",i.file);try{u.value=!0;const m=await H(o);l.value.imgUrl=m.imgUrl,await r()}catch(m){console.log(m)}finally{u.value=!1}},D=async()=>{s.value&&await s.value.validate((i,o)=>{var m;i&&(l.value.type==="upload"?(m=a.value)==null||m.submit():r())})},r=async()=>{try{u.value=!0,await me({id:l.value.id,position:l.value.position,link:l.value.link,imgUrl:l.value.imgUrl}),k.success("保存成功"),_("onSuccess"),p()}catch(i){console.log(i),k.error(i.msg??JSON.stringify(i))}finally{u.value=!1}},d=i=>{f.value=!0,i&&(l.value={...l.value,...i})},p=()=>{var i;f.value=!1,(i=s.value)==null||i.resetFields(),l.value=c()};return C({open:d,close:p}),(i,o)=>{const m=n("el-radio"),q=n("el-radio-group"),L=n("el-form-item"),F=n("el-input"),U=n("el-icon"),B=n("el-upload"),T=n("el-form"),M=n("el-button"),I=n("el-dialog");return $(),R(I,{modelValue:f.value,"onUpdate:modelValue":o[5]||(o[5]=y=>f.value=y),title:"添加悬浮广告 (建议图片长宽比为1:1)","align-center":"",onClose:p},{footer:t(()=>[x("div",Ye,[e(M,{onClick:p,loading:u.value},{default:t(()=>o[10]||(o[10]=[v("取消")])),_:1,__:[10]},8,["loading"]),e(M,{type:"primary",onClick:D,loading:u.value},{default:t(()=>o[11]||(o[11]=[v(" 保存 ")])),_:1,__:[11]},8,["loading"])])]),default:t(()=>[e(T,{model:l.value,rules:V,ref_key:"formRef",ref:s,"label-width":"8rem"},{default:t(()=>[e(L,{label:"显示位置",prop:"position"},{default:t(()=>[e(q,{modelValue:l.value.position,"onUpdate:modelValue":o[0]||(o[0]=y=>l.value.position=y)},{default:t(()=>[e(m,{value:"left"},{default:t(()=>o[6]||(o[6]=[v("左")])),_:1,__:[6]}),e(m,{value:"right"},{default:t(()=>o[7]||(o[7]=[v("右")])),_:1,__:[7]})]),_:1},8,["modelValue"])]),_:1}),e(L,{label:"链接地址",prop:"link"},{default:t(()=>[e(F,{modelValue:l.value.link,"onUpdate:modelValue":o[1]||(o[1]=y=>l.value.link=y)},null,8,["modelValue"])]),_:1}),e(L,{label:"图片类型",prop:"type"},{default:t(()=>[e(q,{modelValue:l.value.type,"onUpdate:modelValue":o[2]||(o[2]=y=>l.value.type=y)},{default:t(()=>[e(m,{value:"link"},{default:t(()=>o[8]||(o[8]=[v("第三方图片")])),_:1,__:[8]}),e(m,{value:"upload"},{default:t(()=>o[9]||(o[9]=[v("本地上传")])),_:1,__:[9]})]),_:1},8,["modelValue"])]),_:1}),l.value.type==="link"?($(),R(L,{key:0,label:"图片地址",prop:"imgUrl"},{default:t(()=>[e(F,{modelValue:l.value.imgUrl,"onUpdate:modelValue":o[3]||(o[3]=y=>l.value.imgUrl=y)},null,8,["modelValue"])]),_:1})):J("",!0),l.value.type==="upload"?($(),R(L,{key:1,label:"图片上传",prop:"file"},{default:t(()=>[e(B,{ref_key:"uploadRef",ref:a,"file-list":l.value.file,"onUpdate:fileList":o[4]||(o[4]=y=>l.value.file=y),action:"","list-type":"picture-card","http-request":S,limit:1,"auto-upload":!1,accept:"image/*","before-upload":b},{default:t(()=>[e(U,null,{default:t(()=>[e(N(G))]),_:1})]),_:1},8,["file-list"])]),_:1})):J("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),He={class:"flex flex-col gap-4"},Ke={class:"text-base font-bold flex items-center justify-between"},Qe=O({__name:"AdFloatContent",props:{siteData:{}},emits:["onSuccess"],setup(A,{emit:C}){const g=A,f=C,_=w(),u=()=>{_.value&&_.value.open()},c=async l=>{try{await fe(l),k.success("删除成功"),f("onSuccess")}catch(a){k.error(a.msg??JSON.stringify(a))}};return(l,a)=>{const s=n("el-button"),V=n("el-image"),b=n("el-table-column"),S=n("el-tag"),D=n("el-popconfirm"),r=n("el-table");return $(),E(z,null,[x("div",He,[x("h2",Ke,[a[2]||(a[2]=v(" 悬浮广告 ")),e(s,{type:"primary",onClick:u},{default:t(()=>a[1]||(a[1]=[v("添加")])),_:1,__:[1]})]),e(r,{data:g.siteData.adFloat,stripe:"",border:""},{default:t(()=>[e(b,{label:"图片",prop:"imgUrl","max-width":"1000"},{default:t(d=>[e(V,{src:d.row.imgUrl,style:{height:"60px",width:"auto"}},null,8,["src"])]),_:1}),e(b,{label:"链接地址",prop:"link"}),e(b,{label:"显示位置",prop:"position"},{default:t(d=>[d.row.position==="left"?($(),R(S,{key:0,type:"primary"},{default:t(()=>a[3]||(a[3]=[v("左")])),_:1,__:[3]})):($(),R(S,{key:1,type:"success"},{default:t(()=>a[4]||(a[4]=[v("右")])),_:1,__:[4]}))]),_:1}),e(b,{label:"操作",width:"160"},{default:t(d=>[e(D,{title:"确定要删除吗？",onConfirm:p=>c(d.row.id)},{reference:t(()=>[e(s,{type:"danger",onClick:d.row,link:""},{default:t(()=>a[5]||(a[5]=[v("删除")])),_:2,__:[5]},1032,["onClick"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])]),e(Ge,{ref_key:"dialogAdFloatRef",ref:_,onOnSuccess:a[0]||(a[0]=d=>f("onSuccess"))},null,512)],64)}}}),We={class:"flex justify-between items-center"},he={class:"flex flex-col gap-8"},el={class:"flex flex-col gap-4"},ll={class:"flex flex-col gap-4"},tl={class:"grid grid-cols-4 gap-4"},ol=O({__name:"AdContent",setup(A){const C=w(!1),g=w({siteName:"",marquee:{text:"",link:"",textColor:"",bgColor:""},links:[],adList:[],adTable:[],adApp:[],adCard:[],adFloat:[]}),f=async()=>{try{C.value=!0,await ve(g.value),k.success("保存成功"),await K()}catch(u){console.log(u),k.error(u.msg??JSON.stringify(u))}finally{C.value=!1}},_=async()=>{try{C.value=!0;const u=await K();g.value={...g.value,...u}}catch(u){console.log(u),k.error(u.msg??JSON.stringify(u))}finally{C.value=!1}};return _e(()=>{_()}),(u,c)=>{const l=n("el-button"),a=n("el-input"),s=n("el-form-item"),V=n("el-color-picker"),b=n("el-form"),S=n("el-card"),D=ce("loading");return $(),E("div",null,[e(S,null,{header:t(()=>[x("div",We,[c[6]||(c[6]=x("div",null,"网站管理",-1)),e(l,{type:"success",onClick:f,loading:C.value},{default:t(()=>c[5]||(c[5]=[v("保存")])),_:1,__:[5]},8,["loading"])])]),default:t(()=>[ge(($(),E("div",null,[e(b,{model:g.value},{default:t(()=>[x("div",he,[x("div",el,[c[7]||(c[7]=x("h2",{class:"text-base font-bold"},"网站信息",-1)),e(s,{label:"网站名称",prop:"siteTitle"},{default:t(()=>[e(a,{modelValue:g.value.siteName,"onUpdate:modelValue":c[0]||(c[0]=r=>g.value.siteName=r)},null,8,["modelValue"])]),_:1})]),x("div",ll,[c[8]||(c[8]=x("h2",{class:"text-base font-bold"},"跑马灯设置",-1)),x("div",tl,[e(s,{label:"跑马灯文字",prop:"marquee.text"},{default:t(()=>[e(a,{modelValue:g.value.marquee.text,"onUpdate:modelValue":c[1]||(c[1]=r=>g.value.marquee.text=r)},null,8,["modelValue"])]),_:1}),e(s,{label:"跑马灯链接",prop:"marquee.link"},{default:t(()=>[e(a,{modelValue:g.value.marquee.link,"onUpdate:modelValue":c[2]||(c[2]=r=>g.value.marquee.link=r)},null,8,["modelValue"])]),_:1}),e(s,{label:"跑马灯文字颜色",prop:"marquee.textColor"},{default:t(()=>[e(V,{modelValue:g.value.marquee.textColor,"onUpdate:modelValue":c[3]||(c[3]=r=>g.value.marquee.textColor=r),predefine:N(j)},null,8,["modelValue","predefine"])]),_:1}),e(s,{label:"跑马灯背景颜色",prop:"marquee.bgColor"},{default:t(()=>[e(V,{modelValue:g.value.marquee.bgColor,"onUpdate:modelValue":c[4]||(c[4]=r=>g.value.marquee.bgColor=r),predefine:N(j)},null,8,["modelValue","predefine"])]),_:1})])]),e(we,{"site-data":g.value,onOnSuccess:_},null,8,["site-data"]),e($e,{"site-data":g.value,onOnSuccess:_},null,8,["site-data"]),e(Ie,{"site-data":g.value,onOnSuccess:_},null,8,["site-data"]),e(Pe,{"site-data":g.value,onOnSuccess:_},null,8,["site-data"]),e(Ne,{"site-data":g.value,onOnSuccess:_},null,8,["site-data"]),e(Qe,{"site-data":g.value,onOnSuccess:_},null,8,["site-data"])])]),_:1},8,["model"])])),[[D,C.value]])]),_:1})])}}}),rl=O({__name:"Dashboard",setup(A){return(C,g)=>($(),R(Q,null,{header:t(()=>[e(h)]),aside:t(()=>[e(W)]),default:t(()=>[e(ol)]),_:1}))}});export{rl as default};
